import{A as g,a as p}from"./72y5wB-v.js";import{c as _}from"./ibMq-yxt.js";import{_ as b,s as v,r as f,j as y,c,D as L,b as w,a as e,F as A,k as B,o as s,t as o}from"./DV93emuu.js";const K={key:1},N={class:"admin-table"},C=["onClick"],E={__name:"admin-kontakt",setup(F){const u=v(),i=_(u.public.supabaseUrl,u.public.supabaseAnonKey),l=f(!1),r=f([]);y(async()=>{const{data:{session:a}}=await i.auth.getSession();l.value=!!a,l.value&&d()});function m(){l.value=!0,d()}const d=async()=>{const{data:a,error:t}=await i.from("kontakte").select("*");t?console.error("Fehler beim Laden der Kontakte:",t):r.value=a},h=async()=>{await i.auth.signOut(),l.value=!1},k=async a=>{if(!confirm("Eintrag wirklich löschen?"))return;const{error:t}=await i.from("kontakte").delete().eq("id",a);t?alert("Fehler beim Löschen"):r.value=r.value.filter(n=>n.id!==a)};return(a,t)=>(s(),c("div",null,[l.value?(s(),c("div",K,[w(g,{onLogout:h}),t[1]||(t[1]=e("h2",{class:"section-title"},"Kontaktanfragen",-1)),e("table",N,[t[0]||(t[0]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Telefon"),e("th",null,"Betreff"),e("th",null,"Nachricht"),e("th",null,"Aktionen")])],-1)),e("tbody",null,[(s(!0),c(A,null,B(r.value,n=>(s(),c("tr",{key:n.id},[e("td",null,o(n.name),1),e("td",null,o(n.email),1),e("td",null,o(n.telefon||"-"),1),e("td",null,o(n.betreff),1),e("td",null,o(n.nachricht),1),e("td",null,[e("button",{onClick:S=>k(n.id),class:"btn-delete"},"Löschen",8,C)])]))),128))])])])):(s(),L(p,{key:0,onLoginSuccess:m}))]))}},V=b(E,[["__scopeId","data-v-23534227"]]);export{V as default};
