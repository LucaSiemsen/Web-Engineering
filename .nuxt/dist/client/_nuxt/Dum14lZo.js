import{_ as E,a as R,b as F}from"./GKAhX0yl.js";import{p as U,s as A,r as s,c as l,q as M,a as t,b as B,x as w,B as I,v as i,y as k,C as x,t as P,o as a}from"./DV93emuu.js";import{c as O}from"./ibMq-yxt.js";const W=U("/assets/icon_student_1.png"),Z=U("/assets/icon_student_2.png"),j={class:"form-page"},T={class:"form-container"},K={key:0},L={class:"form-group"},$={class:"form-group"},G={class:"form-group"},H={key:1},J={class:"form-group"},Q={class:"form-group"},X={class:"form-group"},Y={key:2},ee={class:"form-group"},te={class:"form-group"},ne={class:"button-group",style:{"margin-top":"20px"}},oe=["disabled"],se={key:1,type:"submit",class:"btn-form"},le={key:0,style:{"text-align":"center","margin-top":"20px"}},de={__name:"bewerbung",setup(ie){const S=A(),z=O(S.public.supabaseUrl,S.public.supabaseAnonKey),o=s(1),r=s(""),d=s(""),p=s(""),v=s(""),m=s(""),c=s(""),f=s(""),u=s(null),g=s("");function q(){o.value<3&&o.value++}function D(){o.value>1&&o.value--}function C(){u.value&&(u.value.value=null)}async function N(){var h;const y=(h=u.value)==null?void 0:h.files[0];let e=null;if(y){const _=new FormData;_.append("file",y);const n=await fetch("/api/upload",{method:"POST",body:_}),V=await n.json();if(!n.ok){console.error("Upload-Fehler:",V),g.value="Datei-Upload fehlgeschlagen.";return}e=`https://eerzdodlszahdqgldhms.supabase.co/storage/v1/object/public/bewerbungsunterlagen/${V.path}`}const{error:b}=await z.from("bewerbungen").insert({Vorname:r.value,nachname:d.value,email:p.value,studiengang:v.value,Nachricht:f.value,Zeugnisse_url:e,Abschluss:m.value,Studienform:c.value});g.value=b?"Eintrag fehlgeschlagen.":"Bewerbung erfolgreich versendet!",b||(o.value=1,r.value="",d.value="",p.value="",v.value="",m.value="",c.value="",f.value="",u.value&&(u.value.value=null))}return(y,e)=>{const b=E,h=R,_=F;return a(),l("div",null,[e[19]||(e[19]=M('<section class="bewerbung-header" style="margin-bottom:20px;"><div class="icon-row"><img src="'+W+'" alt="Icon links" class="bewerbung-icon"><h1 class="bewerbung-title">Bewerbung für deinen Studienplatz</h1><img src="'+Z+'" alt="Icon rechts" class="bewerbung-icon"></div></section>',1)),t("section",j,[t("div",T,[e[18]||(e[18]=t("h2",{class:"section-title"},"Bewerbungsformular",-1)),t("form",{onSubmit:I(N,["prevent"])},[o.value===1?(a(),l("div",K,[t("div",L,[e[7]||(e[7]=t("label",{for:"vorname"},"Vorname:",-1)),i(t("input",{type:"text",id:"vorname","onUpdate:modelValue":e[0]||(e[0]=n=>r.value=n),required:""},null,512),[[k,r.value]])]),t("div",$,[e[8]||(e[8]=t("label",{for:"nachname"},"Nachname:",-1)),i(t("input",{type:"text",id:"nachname","onUpdate:modelValue":e[1]||(e[1]=n=>d.value=n),required:""},null,512),[[k,d.value]])]),t("div",G,[e[9]||(e[9]=t("label",{for:"email"},"E-Mail:",-1)),i(t("input",{type:"email",id:"email","onUpdate:modelValue":e[2]||(e[2]=n=>p.value=n),required:""},null,512),[[k,p.value]])])])):w("",!0),o.value===2?(a(),l("div",H,[t("div",J,[e[11]||(e[11]=t("label",{for:"studiengang"},"Studiengang:",-1)),i(t("select",{id:"studiengang","onUpdate:modelValue":e[3]||(e[3]=n=>v.value=n),required:""},e[10]||(e[10]=[M('<option value="">Bitte wählen</option><option value="Informatik">Informatik</option><option value="Wirtschaft">Wirtschaft</option><option value="Design">Design</option><option value="Betriebswirtschaftslehre">Betriebswirtschaftslehre</option><option value="Bauingenieurwesen">Bauingenieurwesen</option><option value="Maschinenbau">Maschinenbau</option><option value="Elektrotechnik">Elektrotechnik</option><option value="Medieninformatik">Medieninformatik</option>',9)]),512),[[x,v.value]])]),t("div",Q,[e[13]||(e[13]=t("label",{for:"abschluss"},"Abschluss:",-1)),i(t("select",{id:"abschluss","onUpdate:modelValue":e[4]||(e[4]=n=>m.value=n),required:""},e[12]||(e[12]=[t("option",{value:""},"Bitte wählen",-1),t("option",{value:"Bachelor"},"Bachelor",-1),t("option",{value:"Master"},"Master",-1)]),512),[[x,m.value]])]),t("div",X,[e[15]||(e[15]=t("label",{for:"studienform"},"Studienform:",-1)),i(t("select",{id:"studienform","onUpdate:modelValue":e[5]||(e[5]=n=>c.value=n),required:""},e[14]||(e[14]=[t("option",{value:""},"Bitte wählen",-1),t("option",{value:"Praesenz"},"Präsenzstudium",-1),t("option",{value:"Online"},"Online-Studium",-1)]),512),[[x,c.value]])])])):w("",!0),o.value===3?(a(),l("div",Y,[t("div",ee,[e[16]||(e[16]=t("label",{for:"zeugnisse"},"Zeugnisse hochladen (PDF, max. 5MB):",-1)),t("input",{type:"file",id:"zeugnisse",ref_key:"zeugnisseRef",ref:u,accept:".pdf"},null,512),t("button",{type:"button",onClick:C},"Datei entfernen")]),t("div",te,[e[17]||(e[17]=t("label",{for:"nachricht"},"Nachricht:",-1)),i(t("textarea",{id:"nachricht","onUpdate:modelValue":e[6]||(e[6]=n=>f.value=n),rows:"5",required:""},null,512),[[k,f.value]])])])):w("",!0),t("div",ne,[t("button",{type:"button",onClick:D,disabled:o.value===1,style:{"margin-right":"10px"}}," Zurück ",8,oe),o.value<3?(a(),l("button",{key:0,type:"button",onClick:q},"Weiter")):(a(),l("button",se,"Bewerbung absenden"))])],32),g.value?(a(),l("p",le,P(g.value),1)):w("",!0)])]),e[20]||(e[20]=t("div",{class:"white-gap"},null,-1)),B(b),B(h),B(_)])}}};export{de as default};
