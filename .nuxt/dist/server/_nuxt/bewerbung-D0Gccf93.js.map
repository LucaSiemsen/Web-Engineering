{"version":3,"file":"bewerbung-D0Gccf93.js","sources":["../../../../virtual:public?%2Fassets%2Ficon_student_1.png","../../../../virtual:public?%2Fassets%2Ficon_student_2.png","../../../../pages/bewerbung.vue"],"sourcesContent":["import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/assets/icon_student_1.png\")","import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/assets/icon_student_2.png\")","<!--\n  Hinweis zur KI-Nutzung:\n  Die Grundstruktur dieses Bewerbungsformulars wurde mit Unterstützung von ChatGPT erstellt.\n  Die Seitenstruktur, Mehrschritt-Logik sowie Upload- und Supabase-Anbindung basieren auf generierten Vorschlägen.\n  Die Formularlogik, Validierung, Upload-Handling und Datenbankeintrag wurden anschließend manuell angepasst und erweitert.\n-->\n<template>\n  <div>\n    <!-- Titel mit Icons -->\n    <section class=\"bewerbung-header\" style=\"margin-bottom: 20px;\">\n      <div class=\"icon-row\">\n        <img src=\"/assets/icon_student_1.png\" alt=\"Icon links\" class=\"bewerbung-icon\" />\n        <h1 class=\"bewerbung-title\">Bewerbung für deinen Studienplatz</h1>\n        <img src=\"/assets/icon_student_2.png\" alt=\"Icon rechts\" class=\"bewerbung-icon\" />\n      </div>\n    </section>\n\n    <!-- Formular Bereich -->\n    <section class=\"form-page\">\n      <div class=\"form-container\">\n        <h2 class=\"section-title\">Bewerbungsformular</h2>\n\n        <form @submit.prevent=\"sendeBewerbung\">\n          <!-- Schritt 1: Persönliche Daten -->\n          <div v-if=\"step === 1\">\n            <div class=\"form-group\">\n              <label for=\"vorname\">Vorname:</label>\n              <input type=\"text\" id=\"vorname\" v-model=\"vorname\" required />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"nachname\">Nachname:</label>\n              <input type=\"text\" id=\"nachname\" v-model=\"nachname\" required />\n            </div>\n            <div class=\"form-group\">\n              <label for=\"email\">E-Mail:</label>\n              <input type=\"email\" id=\"email\" v-model=\"email\" required />\n            </div>\n          </div>\n\n          <!-- Schritt 2: Studiengang & Abschluss -->\n          <div v-if=\"step === 2\">\n            <div class=\"form-group\">\n              <label for=\"studiengang\">Studiengang:</label>\n              <select id=\"studiengang\" v-model=\"studiengang\" required>\n                <option value=\"\">Bitte wählen</option>\n                <option value=\"Informatik\">Informatik</option>\n                <option value=\"Wirtschaft\">Wirtschaft</option>\n                <option value=\"Design\">Design</option>\n                <option value=\"Betriebswirtschaftslehre\">Betriebswirtschaftslehre</option>\n                <option value=\"Bauingenieurwesen\">Bauingenieurwesen</option>\n                <option value=\"Maschinenbau\">Maschinenbau</option>\n                <option value=\"Elektrotechnik\">Elektrotechnik</option>\n                <option value=\"Medieninformatik\">Medieninformatik</option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"abschluss\">Abschluss:</label>\n              <select id=\"abschluss\" v-model=\"abschluss\" required>\n                <option value=\"\">Bitte wählen</option>\n                <option value=\"Bachelor\">Bachelor</option>\n                <option value=\"Master\">Master</option>\n              </select>\n            </div>\n            <div class=\"form-group\">\n              <label for=\"studienform\">Studienform:</label>\n              <select id=\"studienform\" v-model=\"studienform\" required>\n                <option value=\"\">Bitte wählen</option>\n                <option value=\"Praesenz\">Präsenzstudium</option>\n                <option value=\"Online\">Online-Studium</option>\n              </select>\n            </div>\n          </div>\n\n          <!-- Schritt 3: Upload und Nachricht -->\n          <div v-if=\"step === 3\">\n            <div class=\"form-group\">\n              <label for=\"zeugnisse\">Zeugnisse hochladen (PDF, max. 5MB):</label>\n              <input type=\"file\" id=\"zeugnisse\" ref=\"zeugnisseRef\" accept=\".pdf\" />\n              <!-- Button um Datei zu entfernen -->\n              <button type=\"button\" @click=\"removeFile\">Datei entfernen</button>\n            </div>\n\n            <div class=\"form-group\">\n              <label for=\"nachricht\">Nachricht:</label>\n              <textarea id=\"nachricht\" v-model=\"nachricht\" rows=\"5\" required></textarea>\n            </div>\n          </div>\n\n          <!-- Navigation der Schritte -->\n          <div class=\"button-group\" style=\"margin-top: 20px;\">\n            <button\n              type=\"button\"\n              @click=\"prevStep\"\n              :disabled=\"step === 1\"\n              style=\"margin-right: 10px;\"\n            >\n              Zurück\n            </button>\n\n            <button v-if=\"step < 3\" type=\"button\" @click=\"nextStep\">Weiter</button>\n            <button v-else type=\"submit\" class=\"btn-form\">Bewerbung absenden</button>\n          </div>\n        </form>\n\n        <!-- Feedbacknachricht -->\n        <p v-if=\"feedback\" style=\"text-align:center; margin-top: 20px;\">{{ feedback }}</p>\n      </div>\n    </section>\n\n    <div class=\"white-gap\"></div>\n\n    <!-- Zusätzliche Komponenten -->\n    <Empfehlungbanner />\n    <SocialMeda />\n    <Footer />\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport { useRuntimeConfig } from '#app'\nimport { createClient } from '@supabase/supabase-js'\n\n// Falls Footer etc. als Komponenten importiert werden, hier importieren:\n// import Footer from '~/components/Footer.vue'\n// import Empfehlungbanner from '~/components/Empfehlungbanner.vue'\n// import SocialMeda from '~/components/SocialMeda.vue'\n\n// Supabase initialisieren mit Umgebungsvariablen\nconst config = useRuntimeConfig()\nconst supabase = createClient(config.public.supabaseUrl, config.public.supabaseAnonKey)\n\n// Reaktive Variablen für Formularschritte und Formulardaten\nconst step = ref(1)\nconst vorname = ref('')\nconst nachname = ref('')\nconst email = ref('')\nconst studiengang = ref('')\nconst abschluss = ref('')\nconst studienform = ref('')\nconst nachricht = ref('')\n\n// Ref für Datei-Input\nconst zeugnisseRef = ref(null)\n\n// Feedback für Nutzer\nconst feedback = ref('')\n\n// Zum nächsten Schritt wechseln, solange nicht Schritt 3 erreicht\nfunction nextStep() {\n  if (step.value < 3) step.value++\n}\n\n// Zum vorherigen Schritt zurückkehren, solange Schritt größer 1\nfunction prevStep() {\n  if (step.value > 1) step.value--\n}\n\n// Datei aus dem File-Input entfernen\nfunction removeFile() {\n  if (zeugnisseRef.value) {\n    zeugnisseRef.value.value = null\n  }\n}\n\n// Bewerbung absenden - Upload & Datenbankeintrag\nasync function sendeBewerbung() {\n  const file = zeugnisseRef.value?.files[0]\n  let zeugnis_url = null\n\n  if (file) {\n    // Datei per FormData zum Server senden\n    const formData = new FormData()\n    formData.append('file', file)\n\n    const uploadResponse = await fetch('/api/upload', {\n      method: 'POST',\n      body: formData\n    })\n\n    const uploadResult = await uploadResponse.json()\n\n    if (!uploadResponse.ok) {\n      console.error('Upload-Fehler:', uploadResult)\n      feedback.value = 'Datei-Upload fehlgeschlagen.'\n      return\n    }\n\n    // URL zum gespeicherten Zeugnis in Supabase\n    zeugnis_url = `https://eerzdodlszahdqgldhms.supabase.co/storage/v1/object/public/bewerbungsunterlagen/${uploadResult.path}`\n  }\n\n  // Eintrag in Datenbank\n  const { error } = await supabase.from('bewerbungen').insert({\n    Vorname: vorname.value,\n    nachname: nachname.value,\n    email: email.value,\n    studiengang: studiengang.value,\n    Nachricht: nachricht.value,\n    Zeugnisse_url: zeugnis_url,\n    Abschluss: abschluss.value,\n    Studienform: studienform.value\n  })\n\n  feedback.value = error ? 'Eintrag fehlgeschlagen.' : 'Bewerbung erfolgreich versendet!'\n\n  // Bei Erfolg Formular zurücksetzen\n  if (!error) {\n    step.value = 1\n    vorname.value = ''\n    nachname.value = ''\n    email.value = ''\n    studiengang.value = ''\n    abschluss.value = ''\n    studienform.value = ''\n    nachricht.value = ''\n    if (zeugnisseRef.value) {\n      zeugnisseRef.value.value = null\n    }\n  }\n}\n</script>\n"],"names":["_ssrRenderAttr"],"mappings":";;;;;;;;;;;;;;;;AAAuD,MAAe,aAAA,gBAAgB,4BAA4B;ACA3D,MAAe,aAAA,gBAAgB,4BAA4B;;;;;ACiIlH,UAAM,SAAS,iBAAgB;AACd,iBAAa,OAAO,OAAO,aAAa,OAAO,OAAO,eAAe;AAGtF,UAAM,OAAO,IAAI,CAAC;AAClB,UAAM,UAAU,IAAI,EAAE;AACtB,UAAM,WAAW,IAAI,EAAE;AACvB,UAAM,QAAQ,IAAI,EAAE;AACpB,UAAM,cAAc,IAAI,EAAE;AAC1B,UAAM,YAAY,IAAI,EAAE;AACxB,UAAM,cAAc,IAAI,EAAE;AAC1B,UAAM,YAAY,IAAI,EAAE;AAGH,QAAI,IAAI;AAG7B,UAAM,WAAW,IAAI,EAAE;;;;;qGAzIe,EAA4B,iBAAA,OAAA,CAAA,gCAErDA,cAAA,OAAA,UAAgC,mHAEhCA,cAAA,OAAA,UAAgC;UAWxB,KAAI,UAAA,GAAA;yIAG8B,QAAO,KAAA,0IAIN,SAAQ,KAAA,mIAIV,MAAK,KAAA;;;;UAKtC,KAAI,UAAA,GAAA;iLAGuB,YAAW,KAAA,oBAAX,YAAW,OAAA,EAAA,kBAAX,YAAW,OAAA,EAAA,CAAA,IAAA,cAAA,yFAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,YAAA,kBAAX,YAAW,OAAA,YAAA,CAAA,IAAA,cAAA,uFAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,YAAA,kBAAX,YAAW,OAAA,YAAA,CAAA,IAAA,cAAA,mFAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,QAAA,kBAAX,YAAW,OAAA,QAAA,CAAA,IAAA,cAAA,iGAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,0BAAA,kBAAX,YAAW,OAAA,0BAAA,CAAA,IAAA,cAAA,4GAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,mBAAA,kBAAX,YAAW,OAAA,mBAAA,CAAA,IAAA,cAAA,gGAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,cAAA,kBAAX,YAAW,OAAA,cAAA,CAAA,IAAA,cAAA,6FAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,gBAAA,kBAAX,YAAW,OAAA,gBAAA,CAAA,IAAA,cAAA,iGAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,kBAAA,kBAAX,YAAW,OAAA,kBAAA,CAAA,IAAA,cAAA,mMAcb,UAAS,KAAA,oBAAT,UAAS,OAAA,EAAA,kBAAT,UAAS,OAAA,EAAA,CAAA,IAAA,cAAA,uFAAT,UAAS,KAAA,oBAAT,UAAS,OAAA,UAAA,kBAAT,UAAS,OAAA,UAAA,CAAA,IAAA,cAAA,iFAAT,UAAS,KAAA,oBAAT,UAAS,OAAA,QAAA,kBAAT,UAAS,OAAA,QAAA,CAAA,IAAA,cAAA,+LAQP,YAAW,KAAA,oBAAX,YAAW,OAAA,EAAA,kBAAX,YAAW,OAAA,EAAA,CAAA,IAAA,cAAA,uFAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,UAAA,kBAAX,YAAW,OAAA,UAAA,CAAA,IAAA,cAAA,uFAAX,YAAW,KAAA,oBAAX,YAAW,OAAA,QAAA,kBAAX,YAAW,OAAA,QAAA,CAAA,IAAA,cAAA;;;;UAStC,KAAI,UAAA,GAAA;gVAUuB,UAAS,KAAA,CAAA,yBAAA;AAAA;;;+DAKrB,EAAyB,cAAA,OAAA,CAAA,iDAIpC,KAAI,UAAA,CAAA,IAAA,cAAA,4BACf,EAA2B,gBAAA,OAAA,CAAA;UAKf,KAAI,QAAA,GAAA;;;;;;UAMb,SAAQ,OAAA;0CAAE,EAA4C,cAAA,UAAA,cAAA,OAAA,CAAA,qBAAI,SAAQ,KAAA;;;;;;;;;;;;;;;;;;"}